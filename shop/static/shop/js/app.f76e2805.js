(function(e){function t(t){for(var r,a,s=t[0],u=t[1],i=t[2],d=0,b=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&b.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(b.length)b.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(r=!1)}r&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},c=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var i=0;i<s.length;i++)t(s[i]);var l=u;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"03a3":function(e,t,n){"use strict";n("ef8b")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},"1a24":function(e,t,n){"use strict";n("3532")},2:function(e,t){},3:function(e,t){},3532:function(e,t,n){},3534:function(e,t,n){"use strict";n("4e16")},4:function(e,t){},"41d0":function(e,t,n){"use strict";n("c715")},"4e16":function(e,t,n){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function o(e,t){var n=Object(r["w"])("router-view");return Object(r["p"])(),Object(r["d"])(n)}const c={};c.render=o;var a=c,s=n("6c02"),u=(n("b0c0"),Object(r["E"])("data-v-5f8afbaa"));Object(r["s"])("data-v-5f8afbaa");var i={class:"customCardGroup"},l={key:0},d={class:"card-header bg-warning"},b={class:"card-body"},m={class:"card-title"},f={key:1,style:{color:"white","font-weight":"bold"}};Object(r["q"])();var g=u((function(e,t,n,o,c,a){var s=Object(r["w"])("Header"),g=Object(r["w"])("router-link"),O=Object(r["w"])("Footer");return Object(r["p"])(),Object(r["d"])(r["a"],null,[Object(r["g"])("div",null,[Object(r["g"])(s,{useremail:c.useremail,auth:!0},null,8,["useremail"]),Object(r["g"])("div",i,[void 0!==c.allProducts&&null!==c.allProducts?(Object(r["p"])(),Object(r["d"])("div",l,[c.allProducts.length>=1?(Object(r["p"])(!0),Object(r["d"])(r["a"],{key:0},Object(r["v"])(c.allProducts,(function(t){return Object(r["p"])(),Object(r["d"])("div",{class:"card",key:t.id},[Object(r["g"])("h5",d,[e.isAuth?(Object(r["p"])(),Object(r["d"])(g,{key:0,to:{name:"product",params:{productID:t.id},query:{useremail:c.useremail}}},{default:u((function(){return[Object(r["f"])(Object(r["y"])(t.name),1)]})),_:2},1032,["to"])):(Object(r["p"])(),Object(r["d"])(g,{key:1,to:{name:"product",params:{productID:t.id}}},{default:u((function(){return[Object(r["f"])(Object(r["y"])(t.name),1)]})),_:2},1032,["to"]))]),Object(r["g"])("div",b,[Object(r["g"])("h5",m,Object(r["y"])(t.price)+"$",1),Object(r["g"])("a",{onClick:function(e){return a.addToBucket(t)},class:"btn btn-danger"},"Добавить в корзину",8,["onClick"])])])})),128)):c.allProducts.length<=0?(Object(r["p"])(),Object(r["d"])("div",f," Список товаров пуст ")):Object(r["e"])("",!0)])):Object(r["e"])("",!0)])]),Object(r["g"])(O)],64)})),O=n("1da1"),p=(n("96cf"),n("d3b7"),n("99af"),n("caad"),n("2532"),{class:"pos-f-t"}),j={ref:"customcollapsepanel",class:"customcollapsepanel collapse",id:"navbarToggleExternalContent"},h={class:"customcollapse bg-dark p-4"},v={key:0},w={class:"navbar-nav"},y={class:"nav-item"},k=Object(r["f"])(" Вход "),x=Object(r["g"])("br",{style:{clear:"both"}},null,-1),R={class:"nav-item"},C=Object(r["f"])(" Регистрация "),S={key:0},T={class:"nav-item"},q=Object(r["f"])(" Главная "),$={class:"nav-item"},U=Object(r["f"])(" Корзина "),_={class:"badge bg-danger"},A={key:1,style:{float:"right"}},E={class:"badge bg-danger"},I={class:"badge bg-danger"},H=Object(r["f"])("+"),P={class:"nav-item"},N=Object(r["f"])(" Главная "),B={class:"nav-item"},L=Object(r["f"])(" Корзина "),F={class:"badge bg-danger"},J={class:"navbar navbar-dark bg-dark"},D=Object(r["g"])("span",{class:"navbar-toggler-icon"},null,-1),G=Object(r["g"])("a",{class:"navbar-brand",href:"#"},"Market Town",-1),V={class:"navbar-nav"},M={key:0},K={key:0},X={class:"nav-item"},z=Object(r["f"])(" Вход "),W=Object(r["g"])("br",{style:{clear:"both"}},null,-1),Q={class:"nav-item"},Y=Object(r["f"])(" Регистрация "),Z={key:1},ee={class:"nav-item"},te=Object(r["f"])(" Главная "),ne={class:"nav-item"},re=Object(r["f"])(" Корзина "),oe={class:"badge bg-danger"};function ce(e,t,n,o,c,a){var s=Object(r["w"])("router-link");return Object(r["p"])(),Object(r["d"])("div",p,[Object(r["g"])("div",j,[Object(r["g"])("div",h,[n.auth?n.auth?(Object(r["p"])(),Object(r["d"])("div",A,[Object(r["g"])("li",null,[Object(r["g"])("span",E,[Object(r["g"])("a",{class:"badge bg-danger",style:{cursor:"pointer"},onClick:t[1]||(t[1]=function(e){return a.logoutUser()})},"Выйти")])]),Object(r["g"])("li",null,[Object(r["g"])("span",I,[Object(r["g"])(s,{style:{color:"white","text-decoration":"none"},to:{name:"Amount",query:{useremail:n.useremail,amount:0}}},{default:Object(r["C"])((function(){return[H]})),_:1},8,["to"])])]),Object(r["g"])("li",P,[Object(r["g"])(s,{style:{color:"red"},to:{name:"Home"}},{default:Object(r["C"])((function(){return[N]})),_:1})]),Object(r["g"])("li",B,[Object(r["g"])(s,{style:{color:"red"},class:"nav-item",to:{name:"Bucket",query:{useremail:n.useremail}}},{default:Object(r["C"])((function(){return[L]})),_:1},8,["to"])]),Object(r["g"])("li",null,[Object(r["g"])("span",F,Object(r["y"])(n.useremail),1)])])):Object(r["e"])("",!0):(Object(r["p"])(),Object(r["d"])("div",v,[Object(r["g"])("ul",w,[Object(r["g"])("div",null,[Object(r["g"])("li",y,[Object(r["g"])(s,{style:{color:"red",float:"right"},class:"nav-item",to:{name:"UsersLogin"}},{default:Object(r["C"])((function(){return[k]})),_:1})]),x,Object(r["g"])("li",R,[Object(r["g"])(s,{style:{color:"red",float:"right"},class:"nav-item",to:{name:"UsersRegistry"}},{default:Object(r["C"])((function(){return[C]})),_:1})]),n.auth?(Object(r["p"])(),Object(r["d"])("div",S,[Object(r["g"])("li",T,[Object(r["g"])(s,{to:{name:"Home"}},{default:Object(r["C"])((function(){return[q]})),_:1})]),Object(r["g"])("li",$,[Object(r["g"])(s,{class:"nav-item",to:{name:"Bucket",query:{useremail:n.useremail}}},{default:Object(r["C"])((function(){return[U]})),_:1},8,["to"])]),Object(r["g"])("li",null,[Object(r["g"])("span",_,Object(r["y"])(n.useremail),1)])])):Object(r["e"])("",!0)])])]))])],512),Object(r["g"])("nav",J,[Object(r["g"])("button",{onClick:t[2]||(t[2]=function(e){return a.toggleSidebar()}),class:"customburger navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarToggleExternalContent","aria-controls":"navbarToggleExternalContent","aria-expanded":"false","aria-label":"Toggle navigation"},[D]),G,Object(r["g"])("ul",V,[c.burgerVisible?Object(r["e"])("",!0):(Object(r["p"])(),Object(r["d"])("div",M,[n.auth?n.auth?(Object(r["p"])(),Object(r["d"])("div",Z,[Object(r["g"])("li",ee,[Object(r["g"])(s,{to:{name:"Home"},style:{color:"red"}},{default:Object(r["C"])((function(){return[te]})),_:1})]),Object(r["g"])("li",ne,[Object(r["g"])(s,{class:"nav-item",to:{name:"Bucket",query:{useremail:n.useremail}},style:{color:"red"}},{default:Object(r["C"])((function(){return[re]})),_:1},8,["to"])]),Object(r["g"])("li",null,[Object(r["g"])("span",oe,Object(r["y"])(n.useremail),1)])])):Object(r["e"])("",!0):(Object(r["p"])(),Object(r["d"])("div",K,[Object(r["g"])("li",X,[Object(r["g"])(s,{style:{color:"red",float:"right"},class:"nav-item",to:{name:"UsersLogin"}},{default:Object(r["C"])((function(){return[z]})),_:1})]),W,Object(r["g"])("li",Q,[Object(r["g"])(s,{style:{color:"red",float:"right"},class:"nav-item",to:{name:"UsersRegistry"}},{default:Object(r["C"])((function(){return[Y]})),_:1})])]))]))])])])}var ae=n("14b7"),se={name:"Header",data:function(){return{burgerVisible:!1}},methods:{toggleSidebar:function(){this.burgerVisible=!this.burgerVisible,this.burgerVisible?this.$refs.customcollapsepanel.style="display: block;":this.burgerVisible||(this.$refs.customcollapsepanel.style="display: none;")},logoutUser:function(){window.localStorage.clear(),ae["sign"]({useremail:"custom@mail.ru"},"secret",{expiresIn:1}),this.$router.push({name:"UsersLogin"})}},props:{auth:{type:Boolean,default:!1},useremail:{type:String}}};n("41d0");se.render=ce;var ue=se,ie=Object(r["E"])("data-v-b0f0f010");Object(r["s"])("data-v-b0f0f010");var le=Object(r["g"])("br",{style:{clear:"both"}},null,-1),de={class:"bg-dark p-4 customfooter"},be={class:"",style:{color:"white","font-weight":"bold"}};Object(r["q"])();var me=ie((function(e,t,n,o,c,a){return Object(r["p"])(),Object(r["d"])(r["a"],null,[le,Object(r["g"])("div",de,[Object(r["g"])("p",be,"© "+Object(r["y"])((new Date).toLocaleDateString()),1)])],64)})),fe={name:"Footer"};n("f614");fe.render=me,fe.__scopeId="data-v-b0f0f010";var ge=fe,Oe=window.location.protocol+"//"+window.location.host,pe={name:"Home",data:function(){return{allProducts:[],useremail:"",token:window.localStorage.getItem("markettowntoken")}},methods:{addToBucket:function(e){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:fetch("".concat(Oe,"/users/bucket/add/?useremail=").concat(t.useremail,"&productname=").concat(e.name,"&productprice=").concat(e.price,"&productid=").concat(e.id),{mode:"cors",method:"GET"}).then((function(e){return e.body})).then((function(e){var t=e.getReader();return new ReadableStream({start:function(e){function n(){t.read().then((function(t){var r=t.done,o=t.value;if(r)return console.log("done",r),void e.close();e.enqueue(o),console.log(r,o),n()}))}n()}})})).then((function(e){return new Response(e,{headers:{"Content-Type":"text/html"}}).text()})).then(function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:ae["verify"](t.token,"secret",(function(e,r){e?t.$router.push({name:"UsersLogin"}):JSON.parse(n).status.includes("OK")&&t.$router.push({name:"Bucket",query:{useremail:t.useremail}})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})))()}},mounted:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:null!==e.$route.query.redirectroute&&void 0!==e.$route.query.redirectroute?e.$route.query.redirectroute.includes("users/login")||e.$route.query.redirectroute.includes("users/register")?e.$router.push({path:e.$route.query.redirectroute}):e.$route.query.redirectroute.includes("users/login")||e.$route.query.redirectroute.includes("users/register")||e.$router.push({name:"Home"}):fetch("".concat(Oe,"/home/?useremail=gosha@mail.ru"),{mode:"cors",method:"GET",headers:{accept:"application/json","Access-Control-Allow-Origin":"*"}}).then((function(e){return e.body})).then((function(e){var t=e.getReader();return new ReadableStream({start:function(e){function n(){t.read().then((function(t){var r=t.done,o=t.value;if(r)return console.log("done",r),void e.close();e.enqueue(o),console.log(r,o),n()}))}n()}})})).then((function(e){return new Response(e,{headers:{"Content-Type":"text/html"}}).text()})).then((function(t){console.log(JSON.parse(t)),ae["verify"](e.token,"secret",(function(n,r){n?e.$router.push({name:"UsersLogin"}):(e.allProducts=JSON.parse(t),e.useremail=r.useremail)}))}));case 1:case"end":return t.stop()}}),t)})))()},components:{Header:ue,Footer:ge}};n("03a3");pe.render=g,pe.__scopeId="data-v-5f8afbaa";var je=pe,he=Object(r["E"])("data-v-376b4560");Object(r["s"])("data-v-376b4560");var ve={class:"home"},we={class:"card",style:{width:"18rem"}},ye={class:"card-title"},ke={class:"card-header bg-warning"},xe={class:"card-text"};Object(r["q"])();var Re=he((function(e,t,n,o,c,a){var s=Object(r["w"])("Header"),u=Object(r["w"])("Footer");return Object(r["p"])(),Object(r["d"])(r["a"],null,[Object(r["g"])("div",ve,[Object(r["g"])(s,{auth:!0,useremail:e.useremail},null,8,["useremail"]),Object(r["g"])("div",we,[Object(r["g"])("div",ye,[Object(r["g"])("h5",ke,Object(r["y"])(c.product.name),1)]),Object(r["g"])("div",{class:"card-body","v-if":c.product.length},[Object(r["g"])("p",xe,Object(r["y"])(c.product.price)+"$",1),Object(r["g"])("a",{onClick:t[1]||(t[1]=function(e){return a.addToBucket()}),class:"btn btn-danger"},"Добавить в корзину")],8,["v-if"])])]),Object(r["g"])(u)],64)})),Ce=window.location.protocol+"//"+window.location.host,Se={name:"Product",data:function(){return{product:{},token:window.localStorage.getItem("markettowntoken")}},methods:{addToBucket:function(){var e=this;fetch("".concat(Ce,"/users/bucket/add/?useremail=").concat(this.useremail,"&productname=").concat(this.product.name,"&productprice=").concat(this.product.price,"&productid=").concat(this.$route.params.productID),{mode:"cors",method:"GET"}).then((function(e){return e.body})).then((function(e){var t=e.getReader();return new ReadableStream({start:function(e){function n(){t.read().then((function(t){var r=t.done,o=t.value;if(r)return console.log("done",r),void e.close();e.enqueue(o),console.log(r,o),n()}))}n()}})})).then((function(e){return new Response(e,{headers:{"Content-Type":"text/html"}}).text()})).then(function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:ae["verify"](e.token,"secret",(function(t,n){t?e.$router.push({name:"UsersLogin"}):e.$router.push({name:"Bucket",query:{useremail:n.useremail}})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},mounted:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:ae["verify"](e.token,"secret",(function(t,n){t?e.$router.push({name:"UsersLogin"}):(console.log(e.$route.params.productID),fetch("".concat(Ce,"/product/").concat(e.$route.params.productID,"/?useremail=").concat(n.useremail),{mode:"cors",method:"GET"}).then((function(e){return e.body})).then((function(e){var t=e.getReader();return new ReadableStream({start:function(e){function n(){t.read().then((function(t){var r=t.done,o=t.value;if(r)return console.log("done",r),void e.close();e.enqueue(o),console.log(r,o),n()}))}n()}})})).then((function(e){return new Response(e,{headers:{"Content-Type":"text/html"}}).text()})).then((function(t){console.log(t),ae["verify"](e.token,"secret",(function(n,r){n?e.$router.push({name:"UsersLogin"}):(e.product=JSON.parse(t).product,e.useremail=r.useremail)}))})))}));case 1:case"end":return t.stop()}}),t)})))()},components:{Header:ue,Footer:ge}};n("6f13");Se.render=Re,Se.__scopeId="data-v-376b4560";var Te=Se,qe=Object(r["g"])("h1",{style:{"text-align":"center",color:"white"}},"Пользователь успешно создан!",-1);function $e(e,t,n,o,c,a){var s=Object(r["w"])("Header"),u=Object(r["w"])("Footer");return Object(r["p"])(),Object(r["d"])("div",null,[Object(r["g"])(s,{useremail:e.$route.query.useremail,auth:!0},null,8,["useremail"]),qe,Object(r["g"])(u)])}var Ue={name:"UserCreateSuccess",data:function(){return{useremail:""}},methods:{logoutUser:function(){window.localStorage.clear(),this.$router.push({name:"UsersLogin"})}},components:{Header:ue,Footer:ge}};Ue.render=$e;var _e=Ue,Ae={class:"navbar navbar-expand-lg navbar-light bg-light"},Ee={class:"container-fluid"},Ie=Object(r["g"])("a",{class:"navbar-brand",href:"#"},"Market Town",-1),He=Object(r["g"])("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(r["g"])("span",{class:"navbar-toggler-icon"})],-1),Pe={class:"collapse navbar-collapse",id:"navbarNav"},Ne={class:"navbar-nav"},Be={class:"nav-item"},Le=Object(r["f"])(" Вход "),Fe={class:"nav-item"},Je=Object(r["f"])(" Регистрация "),De={key:0},Ge={class:"card-header"},Ve={href:"#"},Me={class:"card-body"},Ke={class:"card-title"},Xe=Object(r["g"])("p",{class:"card-text"},"With supporting text below as a natural lead-in to additional content.",-1),ze={key:1};function We(e,t,n,o,c,a){var s=Object(r["w"])("router-link");return Object(r["p"])(),Object(r["d"])("div",null,[Object(r["g"])("nav",Ae,[Object(r["g"])("div",Ee,[Ie,He,Object(r["g"])("div",Pe,[Object(r["g"])("ul",Ne,[Object(r["g"])("div",null,[Object(r["g"])("li",Be,[Object(r["g"])(s,{class:"nav-item",to:{name:"UsersLogin"}},{default:Object(r["C"])((function(){return[Le]})),_:1})]),Object(r["g"])("li",Fe,[Object(r["g"])(s,{class:"nav-item",to:{name:"UsersRegistry"}},{default:Object(r["C"])((function(){return[Je]})),_:1})])])])])])]),(Object(r["p"])(!0),Object(r["d"])(r["a"],null,Object(r["v"])(c.allOrders,(function(e){return Object(r["p"])(),Object(r["d"])("div",{key:e._id,class:"card"},[c.allOrders.length>=1?(Object(r["p"])(),Object(r["d"])("div",De,[Object(r["g"])("h5",Ge,[Object(r["g"])("a",Ve,Object(r["y"])(e.ownername),1)]),Object(r["g"])("div",Me,[Object(r["g"])("h5",Ke,Object(r["y"])(e.price),1),Xe])])):0==c.allOrders.length?(Object(r["p"])(),Object(r["d"])("div",ze," список заказов этого пользователя пуст ")):Object(r["e"])("",!0)])})),128))])}var Qe=window.location.protocol+"//"+window.location.host,Ye={name:"OrdersList",data:function(){return{allOrders:[]}},mounted:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:fetch("".concat(Qe,"/admin/orders/?useremail").concat(e.$route.query.useremail),{mode:"cors",method:"GET"}).then((function(e){return e.body})).then((function(e){var t=e.getReader();return new ReadableStream({start:function(e){function n(){t.read().then((function(t){var r=t.done,o=t.value;if(r)return console.log("done",r),void e.close();e.enqueue(o),console.log(r,o),n()}))}n()}})})).then((function(e){return new Response(e,{headers:{"Content-Type":"text/html"}}).text()})).then((function(t){console.log(t),e.allOrders=JSON.parse(t)}));case 1:case"end":return t.stop()}}),t)})))()}};Ye.render=We;var Ze=Ye,et=Object(r["E"])("data-v-0dd842eb");Object(r["s"])("data-v-0dd842eb");var tt={class:"customCardGroup"},nt={key:0},rt={class:"card-header"},ot={class:"card-body"},ct={class:"customErros"},at={key:1},st=Object(r["f"])(" У вас нет ещё ни одного товара в корзине ");Object(r["q"])();var ut=et((function(e,t,n,o,c,a){var s=Object(r["w"])("Header"),u=Object(r["w"])("router-link"),i=Object(r["w"])("Footer");return Object(r["p"])(),Object(r["d"])(r["a"],null,[Object(r["g"])("div",null,[Object(r["g"])(s,{useremail:e.$route.query.useremail,auth:!0},null,8,["useremail"]),Object(r["g"])("div",tt,[c.allProductsInBucketOfThisUser.length>0?(Object(r["p"])(),Object(r["d"])("div",nt,[(Object(r["p"])(!0),Object(r["d"])(r["a"],null,Object(r["v"])(c.allProductsInBucketOfThisUser,(function(e){return Object(r["p"])(),Object(r["d"])("div",{class:"card",key:e.id},[Object(r["g"])("h5",rt,[Object(r["f"])(Object(r["y"])(e.name)+" ",1),Object(r["g"])("span",{onClick:function(t){return a.deleteFromBucket(e.name,e.id)},style:{cursor:"pointer"},class:"material-icons"}," close ",8,["onClick"])]),Object(r["g"])("div",ot,[Object(r["g"])("h5",null,Object(r["y"])(e.price)+"$",1),Object(r["g"])("button",{onClick:function(t){return a.deleteFromBucket(e.name,e.id)},class:"btn btn-danger"},"удалить из корзины",8,["onClick"])])])})),128)),Object(r["g"])("button",{style:{"font-size":"22px","min-width":"150px"},onClick:t[1]||(t[1]=function(e){return a.addOrder()}),class:"order form-control btn btn-success"}," Оформить заказ "+Object(r["y"])(c.priceForAllOrders)+"$ ",1),Object(r["g"])("p",ct,Object(r["y"])(c.errors),1)])):(Object(r["p"])(),Object(r["d"])("div",at,[Object(r["g"])(u,{to:{name:"Home"},class:"form-control btn btn-danger"},{default:et((function(){return[st]})),_:1})]))])]),Object(r["g"])(i)],64)})),it=(n("d81d"),window.location.protocol+"//"+window.location.host),lt={name:"Bucket",data:function(){return{allProductsInBucketOfThisUser:{},priceForAllOrders:0,errors:"",token:window.localStorage.getItem("markettowntoken")}},mounted:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.$route.query.useremail),fetch("".concat(it,"/users/bucket/?useremail=").concat(e.$route.query.useremail),{mode:"cors",method:"GET"}).then((function(e){return e.body})).then((function(e){var t=e.getReader();return new ReadableStream({start:function(e){function n(){t.read().then((function(t){var r=t.done,o=t.value;if(r)return console.log("done",r),void e.close();e.enqueue(o),console.log(r,o),n()}))}n()}})})).then((function(e){return new Response(e,{headers:{"Content-Type":"text/html"}}).text()})).then((function(t){ae["verify"](e.token,"secret",(function(n,r){n?e.$router.push({name:"UsersLogin"}):(console.log(JSON.parse(t)),e.allProductsInBucketOfThisUser=JSON.parse(t).productsInBucket,e.allProductsInBucketOfThisUser.map((function(t){e.priceForAllOrders+=t.price})))}))}));case 2:case"end":return t.stop()}}),t)})))()},methods:{goToPage:function(e){e.includes("home")&&this.router.push({name:"Home"})},addOrder:function(){var e=this;fetch("".concat(it,"/users/bucket/buy/?useremail=").concat(this.$route.query.useremail),{mode:"cors",method:"GET"}).then((function(e){return e.body})).then((function(e){var t=e.getReader();return new ReadableStream({start:function(e){function n(){t.read().then((function(t){var r=t.done,o=t.value;if(r)return console.log("done",r),void e.close();e.enqueue(o),console.log(r,o),n()}))}n()}})})).then((function(e){return new Response(e,{headers:{"Content-Type":"text/html"}}).text()})).then((function(t){ae["verify"](e.token,"secret",(function(n,r){n?e.$router.push({name:"UsersLogin"}):JSON.parse(t).status.includes("OK")?e.$router.push({name:"Amount",query:{useremail:e.$route.query.useremail,amount:0}}):JSON.parse(t).status.includes("Error")&&(e.errors="У вас не хватает денег!!!",setTimeout((function(){e.errors=""}),5e3))}))}))},deleteFromBucket:function(e,t){var n=this;fetch("".concat(it,"/users/bucket/delete/?useremail=").concat(this.$route.query.useremail,"&productname=").concat(e,"&productid=").concat(t),{mode:"cors",method:"GET"}).then((function(e){return e.body})).then((function(e){var t=e.getReader();return new ReadableStream({start:function(e){function n(){t.read().then((function(t){var r=t.done,o=t.value;if(r)return console.log("done",r),void e.close();e.enqueue(o),console.log(r,o),n()}))}n()}})})).then((function(e){return new Response(e,{headers:{"Content-Type":"text/html"}}).text()})).then((function(e){ae["verify"](n.token,"secret",(function(e,t){e?n.$router.push({name:"UsersLogin"}):n.$router.push({name:"Home"})}))}))}},components:{Header:ue,Footer:ge}};n("3534");lt.render=ut,lt.__scopeId="data-v-0dd842eb";var dt=lt,bt=Object(r["E"])("data-v-cb6ca414");Object(r["s"])("data-v-cb6ca414");var mt={class:"customCardGroup"},ft=Object(r["g"])("img",{class:"mb-4",src:"https://cdn4.iconfinder.com/data/icons/logos-brands-5/24/vue-dot-js-256.png",alt:"",width:"72",height:"72"},null,-1),gt=Object(r["g"])("h1",{class:"headerform h3 mb-3 font-weight-normal"},"Войдите",-1),Ot=Object(r["g"])("div",{class:"checkbox mb-3"},null,-1),pt={class:"customErros"};Object(r["q"])();var jt=bt((function(e,t,n,o,c,a){var s=Object(r["w"])("Header"),u=Object(r["w"])("Footer");return Object(r["p"])(),Object(r["d"])("div",null,[Object(r["g"])(s,{auth:!1,touser:""}),Object(r["g"])("div",mt,[ft,gt,Object(r["D"])(Object(r["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.useremail=e}),type:"email",id:"inputEmail",class:"useremail form-control",placeholder:"Email address",required:"",autofocus:""},null,512),[[r["A"],c.useremail]]),Object(r["D"])(Object(r["g"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.userpassword=e}),type:"password",id:"inputPassword",class:"userpassword form-control",placeholder:"Password",required:""},null,512),[[r["A"],c.userpassword]]),Ot,Object(r["g"])("button",{onClick:t[3]||(t[3]=function(){return a.loginUser&&a.loginUser.apply(a,arguments)}),style:{"min-width":"85px"},class:"btn btn-lg btn-danger btn-block loginBtn"},"Войти"),Object(r["g"])("div",pt,Object(r["y"])(c.errors),1)]),Object(r["g"])(u)])})),ht=n("ade3"),vt=window.location.protocol+"//"+window.location.host,wt={name:"UsersLogin",data:function(){return{useremail:"",userpassword:"",errors:"",token:""}},methods:{loginUser:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(vt,"/users/check/?useremail=").concat(e.useremail,"&userpassword=").concat(e.userpassword),{mode:"cors",method:"GET",headers:(n={accept:"application/json","Access-Control-Allow-Origin":"*"},Object(ht["a"])(n,"Access-Control-Allow-Origin","*"),Object(ht["a"])(n,"Access-Control-Allow-Credentials",!0),Object(ht["a"])(n,"Access-Control-Allow-Headers","X-Requested-With, X-Access-Token, X-Socket-ID, Accept-Language, Content-Language, Content-Type, Accept"),Object(ht["a"])(n,"Access-Control-Allow-Methods","GET, POST, OPTIONS, PUT, PATCH, DELETE"),n)}).then((function(e){return e.body})).then((function(e){var t=e.getReader();return new ReadableStream({start:function(e){function n(){t.read().then((function(t){var r=t.done,o=t.value;if(r)return console.log("done",r),void e.close();e.enqueue(o),console.log(r,o),n()}))}n()}})})).then((function(e){return new Response(e,{headers:{"Content-Type":"text/html"}}).text()})).then((function(t){console.log(JSON.parse(t)),JSON.parse(t).status.includes("OK")?(window.localStorage.setItem("auth","true"),e.token=ae["sign"]({useremail:e.useremail},"secret",{expiresIn:"5m"}),window.localStorage.setItem("markettowntoken",e.token),e.$router.push({name:"Home"})):JSON.parse(t).status.includes("Error")&&(e.errors="Такого пользователя не существует!!!")}));case 2:case"end":return t.stop()}}),t)})))()}},components:{Header:ue,Footer:ge}};n("af4b");wt.render=jt,wt.__scopeId="data-v-cb6ca414";var yt=wt,kt=Object(r["E"])("data-v-b1313738");Object(r["s"])("data-v-b1313738");var xt={class:"customCardGroup"},Rt=Object(r["g"])("img",{class:"mb-4",src:"https://cdn4.iconfinder.com/data/icons/logos-brands-5/24/vue-dot-js-256.png",alt:"",width:"72",height:"72"},null,-1),Ct=Object(r["g"])("h1",{class:"h3 mb-3 font-weight-normal headerform"},"Зарегистрируйтесь",-1),St=Object(r["g"])("div",{class:"checkbox mb-3"},null,-1),Tt={class:"customErros"};Object(r["q"])();var qt=kt((function(e,t,n,o,c,a){var s=Object(r["w"])("Header"),u=Object(r["w"])("Footer");return Object(r["p"])(),Object(r["d"])(r["a"],null,[Object(r["g"])("div",null,[Object(r["g"])(s),Object(r["g"])("div",xt,[Rt,Ct,Object(r["D"])(Object(r["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.useremail=e}),type:"email",id:"",class:"useremail form-control",placeholder:"Email address",required:"",autofocus:""},null,512),[[r["A"],c.useremail]]),Object(r["D"])(Object(r["g"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.userpassword=e}),type:"password",id:"",class:"userpassword form-control",placeholder:"Password",required:""},null,512),[[r["A"],c.userpassword]]),Object(r["D"])(Object(r["g"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.userage=e}),type:"text",id:"",class:"userage  form-control",placeholder:"Age",required:"",autofocus:""},null,512),[[r["A"],c.userage]]),Object(r["D"])(Object(r["g"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.username=e}),type:"text",id:"",class:"username form-control",placeholder:"Name",required:"",autofocus:""},null,512),[[r["A"],c.username]]),St,Object(r["g"])("button",{style:{"font-size":"16px","min-width":"175px"},onClick:t[5]||(t[5]=function(){return a.registerNewUser&&a.registerNewUser.apply(a,arguments)}),class:"btn btn-lg btn-danger btn-block registerBtn"},"Зарегистрироваться"),Object(r["g"])("div",Tt,Object(r["y"])(c.errors),1)])]),Object(r["g"])(u)],64)})),$t=window.location.protocol+"//"+window.location.host,Ut={name:"UsersRegistry",data:function(){return{useremail:"",userpassword:"",userage:0,username:"",errors:""}},methods:{registerNewUser:function(){var e=this;fetch("".concat($t,"/users/usercreatesuccess/?useremail=").concat(this.useremail,"&userpassword=").concat(this.userpassword,"&username=").concat(this.username,"&userage=").concat(this.userage),{mode:"cors",method:"GET"}).then((function(e){return e.body})).then((function(e){var t=e.getReader();return new ReadableStream({start:function(e){function n(){t.read().then((function(t){var r=t.done,o=t.value;if(r)return console.log("done",r),void e.close();e.enqueue(o),console.log(r,o),n()}))}n()}})})).then((function(e){return new Response(e,{headers:{"Content-Type":"text/html"}}).text()})).then((function(t){console.log(t),t.includes("created")?(window.localStorage.setItem("auth","true"),window.localStorage.setItem("useremail",e.useremail),e.$router.push({name:"UsersLogin",query:{useremail:e.useremail}})):t.includes("rollback")&&(e.errors="Такой пользователь уже существует!!!")}))}},components:{Header:ue,Footer:ge}};n("1a24");Ut.render=qt,Ut.__scopeId="data-v-b1313738";var _t=Ut,At=Object(r["E"])("data-v-b89505dc");Object(r["s"])("data-v-b89505dc");var Et={class:"main"},It={class:"form-control"},Ht={style:{"text-align":"center"}},Pt=Object(r["f"])("У вас сейчас на счёте ");Object(r["q"])();var Nt=At((function(e,t,n,o,c,a){var s=Object(r["w"])("Header"),u=Object(r["w"])("Footer");return Object(r["p"])(),Object(r["d"])(r["a"],null,[Object(r["g"])(s,{useremail:e.useremail,auth:!0},null,8,["useremail"]),Object(r["g"])("div",Et,[Object(r["g"])("div",It,[Object(r["g"])("p",Ht,[Pt,Object(r["g"])("b",null,Object(r["y"])(c.moneys)+"$",1)]),Object(r["D"])(Object(r["g"])("input",{class:"myamount","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.myamount=e}),type:"text"},null,512),[[r["A"],c.myamount]]),Object(r["g"])("a",{onClick:t[2]||(t[2]=function(){return a.addAmount&&a.addAmount.apply(a,arguments)}),class:"form-control btn btn-danger"}," Пополнить счёт ")]),Object(r["g"])(u)])],64)})),Bt=window.location.protocol+"//"+window.location.host,Lt={name:"Amount",data:function(){return{myamount:0,moneys:0,token:window.localStorage.getItem("markettowntoken")}},mounted:function(){var e=this;fetch("".concat(Bt,"/users/amount/?useremail=").concat(this.$route.query.useremail,"&amount=0"),{mode:"cors",method:"GET"}).then((function(e){return e.body})).then((function(e){var t=e.getReader();return new ReadableStream({start:function(e){function n(){t.read().then((function(t){var r=t.done,o=t.value;if(r)return console.log("done",r),void e.close();e.enqueue(o),console.log(r,o),n()}))}n()}})})).then((function(e){return new Response(e,{headers:{"Content-Type":"text/html"}}).text()})).then((function(t){ae["verify"](e.token,"secret",(function(n,r){n?e.$router.push({name:"UsersLogin"}):JSON.parse(t).status.includes("OK")&&(e.moneys=JSON.parse(t).moneys,e.useremail=r.useremail)}))}))},methods:{addAmount:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(Bt,"/users/amount/?useremail=").concat(e.useremail,"&amount=").concat(e.myamount),{mode:"cors",method:"GET"}).then((function(e){return e.body})).then((function(e){var t=e.getReader();return new ReadableStream({start:function(e){function n(){t.read().then((function(t){var r=t.done,o=t.value;if(r)return console.log("done",r),void e.close();e.enqueue(o),console.log(r,o),n()}))}n()}})})).then((function(e){return new Response(e,{headers:{"Content-Type":"text/html"}}).text()})).then((function(t){console.log(JSON.parse(t)),JSON.parse(t).status.includes("OK")&&e.$router.push({name:"Home"})}));case 2:case"end":return t.stop()}}),t)})))()}},components:{Header:ue,Footer:ge}};n("e74a");Lt.render=Nt,Lt.__scopeId="data-v-b89505dc";var Ft=Lt,Jt=[{path:"/",name:"Home",component:je},{path:"/products/:productID",name:"product",component:Te},{path:"/user/usercreatesuccess",name:"UserCreateSuccess",component:_e},{path:"/admin/orders",name:"OrdersList",component:Ze},{path:"/user/bucket",name:"Bucket",component:dt},{path:"/users/login",name:"UsersLogin",component:yt},{path:"/users/register",name:"UsersRegistry",component:_t},{path:"/user/amount",name:"Amount",component:Ft}],Dt=Object(s["a"])({history:Object(s["b"])("/"),routes:Jt}),Gt=Dt,Vt=n("5502"),Mt=Object(Vt["a"])({state:{},mutations:{},actions:{},modules:{}});a.delimiters=["${","}$"],Object(r["c"])(a).use(Mt).use(Gt).mount("#app")},6:function(e,t){},6590:function(e,t,n){},"6f13":function(e,t,n){"use strict";n("6590")},7:function(e,t){},7639:function(e,t,n){},8:function(e,t){},9:function(e,t){},af4b:function(e,t,n){"use strict";n("cb40")},c715:function(e,t,n){},cb40:function(e,t,n){},e74a:function(e,t,n){"use strict";n("7639")},ec88:function(e,t,n){},ef8b:function(e,t,n){},f614:function(e,t,n){"use strict";n("ec88")}});
//# sourceMappingURL=app.f76e2805.js.map